<% layout("layouts/main") %>

<!-- Flash Messages -->
<% if (error_msg || success_msg) { %>
<div
  class="fixed top-5 left-1/2 transform -translate-x-1/2 w-full max-w-md z-50 px-4"
>
  <% if (error_msg) { %>
  <div
    class="bg-red-600 text-white p-4 rounded-lg shadow-lg flex justify-between items-center transition duration-300"
  >
    <span><%= error_msg %></span>
    <button onclick="this.parentElement.style.display='none'" class="text-xl">
      &times;
    </button>
  </div>
  <% } %> <% if (success_msg) { %>
  <div
    class="bg-green-600 text-white p-4 rounded-lg shadow-lg flex justify-between items-center transition duration-300 mt-2"
  >
    <span><%= success_msg %></span>
    <button onclick="this.parentElement.style.display='none'" class="text-xl">
      &times;
    </button>
  </div>
  <% } %>
</div>

<script>
  setTimeout(() => {
    document.querySelectorAll(".flashmessage").forEach((el) => {
      el.classList.add("opacity-0");
      setTimeout(() => (el.style.display = "none"), 500);
    });
  }, 3000);
</script>
<% } %>

<!-- Profile Page -->
<div class="container mx-auto px-4 py-12">
  <div
    class="bg-white shadow-xl rounded-2xl border border-gray-200 p-8 md:flex gap-10 max-w-5xl mx-auto"
  >
    <!-- Avatar -->
    <div class="flex justify-center md:justify-start mb-6 md:mb-0">
      <img
        src="<%= user.avatar %>"
        alt="Avatar"
        class="w-36 h-36 md:w-44 md:h-44 rounded-full object-cover border-4 border-blue-500 shadow-md"
      />
    </div>

    <!-- User Info -->
    <div class="flex-1 space-y-6">
      <!-- Welcome -->
      <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">
        Welcome, <%= user.name %>!
      </h1>

      <!-- Grid Info -->
      <div class="grid sm:grid-cols-2 gap-4 text-gray-700">
        <p>
          <strong>Username:</strong>
          <span class="font-medium"><%= user.username %></span>
        </p>
        <p>
          <strong>Email:</strong>
          <span class="font-medium"><%= user.email %></span>
        </p>

        <% if (user.phone) { %>
        <p>
          <strong>Phone:</strong>
          <span class="font-medium"><%= user.phone %></span>
        </p>
        <% } %> <% if (user.role) { %>
        <p>
          <strong>Role:</strong>
          <span class="font-medium capitalize"><%= user.role %></span>
        </p>
        <% } %> <% if (user.roleRequest) { %>
        <p>
          <strong>Role Requested:</strong>
          <span class="font-medium capitalize"><%= user.roleRequest %></span>
        </p>
        <% } %> <% if (user.bio) { %>
        <p class="sm:col-span-2">
          <strong>Bio:</strong> <span class="font-medium"><%= user.bio %></span>
        </p>
        <% } %>
      </div>

      <!-- Social Links -->
      <% if (user.socials && (user.socials.linkedin || user.socials.github ||
      user.socials.behance)) { %>
      <div>
        <h2 class="text-lg font-semibold text-gray-800 mb-2">Social Links</h2>
        <div class="flex flex-wrap gap-3">
          <% if (user.socials.linkedin) { %>
          <a
            href="<%= user.socials.linkedin %>"
            target="_blank"
            class="text-blue-600 hover:underline"
            >LinkedIn</a
          >
          <% } %> <% if (user.socials.github) { %>
          <a
            href="<%= user.socials.github %>"
            target="_blank"
            class="text-gray-900 hover:underline"
            >GitHub</a
          >
          <% } %> <% if (user.socials.behance) { %>
          <a
            href="<%= user.socials.behance %>"
            target="_blank"
            class="text-indigo-600 hover:underline"
            >Behance</a
          >
          <% } %>
        </div>
      </div>
      <% } %>

      <!-- Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 pt-4">
        <a
          href="/user/<%= user.username %>/edit"
          class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-6 rounded-lg text-center shadow hover:shadow-lg transition"
        >
          Edit Profile
        </a>
        <a
          href="/user/<%= user.username %>/request-role"
          class="bg-gray-800 hover:bg-gray-900 text-white py-2 px-6 rounded-lg text-center shadow hover:shadow-lg transition"
        >
          Request Role
        </a>
      </div>
    </div>
  </div>
</div>
