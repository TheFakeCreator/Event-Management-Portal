<% layout("layouts/main") %> <% if (error_msg || success_msg) { %>
<div
  class="flashmessage-container fixed top-5 left-1/2 transform -translate-x-1/2 w-full max-w-md z-50 px-4"
>
</div>
<script>
  setTimeout(() => {
    const flashMessages = document.querySelectorAll(".flashmessage");
    flashMessages.forEach((flashMessage) => {
      flashMessage.classList.add("opacity-0");
      setTimeout(() => {
        flashMessage.style.display = "none";
      }, 500);
    });
  }, 3000);
</script>
<% } %>

<!-- Main Profile Layout -->
<div class="container mx-auto px-4 sm:px-6 lg:px-10 py-10">
  <div
    class="bg-white shadow-2xl rounded-2xl border border-gray-200 flex flex-col md:flex-row items-center md:items-start p-8 gap-10 max-w-5xl mx-auto"
  >
    <!-- Avatar Section -->
    <div class="flex-shrink-0">
      <img
        src="<%= user.avatar %>"
        alt="Avatar"
        class="w-40 h-40 sm:w-48 sm:h-48 rounded-full object-cover border-4 border-blue-500 shadow-lg"
      />
    </div>

    <!-- User Info Section -->
    <div class="flex-1 w-full">
      <!-- Name -->
      <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-4">
        Welcome, <%= user.name %>!
      </h1>

      <!-- Basic Info -->
      <div
        class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-gray-700 text-base sm:text-lg"
      >
        <p>
          <strong>Username:</strong>
          <span class="font-medium text-gray-900"><%= user.username %></span>
        </p>
        <p>
          <strong>Email:</strong>
          <span class="font-medium text-gray-900"><%= user.email %></span>
        </p>
        <% if (user.phone) { %>
        <p>
          <strong>Phone:</strong>
          <span class="font-medium text-gray-900"><%= user.phone %></span>
        </p>
        <% } %> <% if (user.bio) { %>
        <p class="sm:col-span-2">
          <strong>Bio:</strong>
          <span class="font-medium text-gray-900"><%= user.bio %></span>
        </p>
        <% } %> <% if (user.role) { %>
        <p>
          <strong>Role:</strong>
          <span class="font-medium capitalize text-gray-900"
            ><%= user.role %></span
          >
        </p>
        <% } %> <% if (user.roleRequest) { %>
        <p>
          <strong>Role Requested:</strong>
          <span class="font-medium capitalize text-gray-900"
            ><%= user.roleRequest %></span
          >
        </p>
        <% } %>
      </div>

      <!-- Social Links -->
      <% if (user.socials && (user.socials.linkedin || user.socials.github ||
      user.socials.behance)) { %>
      <div class="mt-6">
        <h2 class="text-lg font-semibold mb-2 text-gray-800">Social Links</h2>
        <div class="flex flex-wrap gap-4">
          <% if (user.socials.linkedin) { %>
          <a
            href="<%= user.socials.linkedin %>"
            target="_blank"
            class="text-blue-600 hover:underline"
            >LinkedIn</a
          >
          <% } %> <% if (user.socials.github) { %>
          <a
            href="<%= user.socials.github %>"
            target="_blank"
            class="text-gray-800 hover:underline"
            >GitHub</a
          >
          <% } %> <% if (user.socials.behance) { %>
          <a
            href="<%= user.socials.behance %>"
            target="_blank"
            class="text-indigo-600 hover:underline"
            >Behance</a
          >
          <% } %>
        </div>
      </div>
      <% } %>

      <!-- Action Buttons -->
      <div
        class="mt-8 flex flex-col sm:flex-row sm:space-x-4 space-y-4 sm:space-y-0"
      >
        <a
          href="/user/<%= user.username %>/edit"
          class="px-5 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-shadow shadow-md hover:shadow-xl text-center w-full sm:w-auto"
        >
          Edit Profile
        </a>
        <a
          href="/user/<%= user.username %>/request-role"
          class="px-5 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-shadow shadow-md hover:shadow-xl text-center w-full sm:w-auto"
        >
          Request Role
        </a>
      </div>
    </div>
  </div>
</div>
